- name: disable rhel-7-server-htb-rpms
  command: "subscription-manager repos --disable=rhel-7-server-htb-rpms"
  register: result
- debug:
    var: result.stdout

- name: add rhel-7-server-rpms repo
  command: "subscription-manager repos --enable rhel-7-server-rpms"
  register: result
- debug:
    var: result.stdout

- name: add rhel-7-server-extras-rpms repo
  command: "subscription-manager repos --enable rhel-7-server-extras-rpms"
  register: result
- debug:
    var: result.stdout

- name: add rhel-7-server-optional-rpms repo
  command: "subscription-manager repos --enable rhel-7-server-optional-rpms"
  register: result
- debug:
    var: result.stdout

- name: add rhel-7-server-ose-3.9-rpms repo
  command: "subscription-manager repos --enable rhel-7-server-ose-3.9-rpms"
  register: result
- debug:
    var: result.stdout

- name: add rhel-7-fast-datapath-rpms repo
  command: "subscription-manager repos --enable rhel-7-fast-datapath-rpms"
  register: result
- debug:
    var: result.stdout

- name: add rhel-7-server-ansible-2.5-rpms repo
  command: "subscription-manager repos --enable rhel-7-server-ansible-2.5-rpms"
  register: result
- debug:
    var: result.stdout

- name: add rh-gluster-3-client-for-rhel-7-server-rpms repo
  command: "subscription-manager repos --enable=rh-gluster-3-client-for-rhel-7-server-rpms"
  register: result
- debug:
    var: result.stdout

- name: add epel repo
  command: "rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm"
  register: result
  ignore_errors: True
- debug:
    var: result.stdout

- name: upgrade all packages
  yum:
    name: "*"
    state: latest

- name: install glusterfs-fuse

  yum:
    name: "glusterfs-fuse"
    state: latest

- name: install ansible
  yum:
    name: "ansible"
    state: latest