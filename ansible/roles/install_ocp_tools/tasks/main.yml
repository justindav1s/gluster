- name: install atomic-openshift-utils, ansible
  yum:
    name: atomic-openshift-utils, ansible
    state: latest

- name: gcc, python-devel, nmap-ncat, bind-utils, wget, git, net-tools, iptables-services, bridge-utils, bash-completion, kexec-tools, sos, psacct
  yum:
    name: gcc, python-devel, nmap-ncat, bind-utils, wget, git, net-tools, iptables-services, bridge-utils, bash-completion, kexec-tools, sos, psacct
    state: latest

- name: add epel repo
  command: "rpm -ivh https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm"
  register: result
  ignore_errors: True
- debug:
    var: result.stdout

- name: install python2-pip
  yum:
    name: "python2-pip"
    state: latest

- name: install ansible
  yum:
    name: "ansible"
    state: latest

- name: make home for scripts and inventory
  file:
    path: /root/ocp
    state: directory
    mode: 0700

- name: copy install_ocp.sh to master
  copy:
   src: install_ocp.sh
   dest: /root/ocp/install_ocp.sh
   mode: 0755

- name: copy makes_admin.sh to master
  copy:
   src: makes_admin.sh
   dest: /root/ocp/makes_admin.sh
   mode: 0755


- name: copy uninstall_ocp.sh to master
  copy:
   src: uninstall_ocp.sh
   dest: /root/ocp/uninstall_ocp.sh
   mode: 0755


- name: copy hosts.with.gluster to master
  copy:
   src: hosts.with.gluster
   dest: /root/ocp/hosts.with.gluster
   mode: 0755
